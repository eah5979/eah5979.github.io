!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="d0909e53-6d5c-4435-833e-3614a61e5ab2",e._sentryDebugIdIdentifier="sentry-dbid-d0909e53-6d5c-4435-833e-3614a61e5ab2")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4296],{84296:(e,r,t)=>{t.d(r,{Bw:()=>c,cG:()=>R,Bd:()=>S,yF:()=>g,zU:()=>O,IT:()=>A.A,sq:()=>I,SQ:()=>z,Td:()=>C});var i=t(31242),o=t(28541),s=t(52470),l=t(17499),n=t(9637),d=t(61391);let a=o.indexes.EsIndexTypes,u=o.indexes.RecordTypes;function c(e,r,t,o,c){var T;let f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:12,m=(0,i.useRouter)(),R="/trading-floor"===(0,d.v)(m),v=(null==o?void 0:o.tradingFloor)||R?a.TICKETS:a.ARTWORKS,y=v===a.TICKETS?u.TICKETS:u.ARTWORK,{data:g,error:A,mutate:O,size:_,setSize:p,isValidating:I}=(0,s.Ay)((i,s)=>{var n,d;if(s&&!s.length)return null;let u=o&&o.genres.length>0?[{terms:{"genres._id.keyword":o.genres}}]:[],c=o&&o.formats.length>0?[{terms:{"format._id.keyword":o.formats}}]:[],T=o&&o.artists.length>0?[{terms:{artistId:o.artists}}]:[],m=o&&o.prices.length>1?[{range:{listPriceMin:{gte:+(null===(n=o.prices)||void 0===n?void 0:n[0]),lte:+(null===(d=o.prices)||void 0===d?void 0:d[1])}}}]:[],g=t&&r?[{term:{["genre"===t?"genres._id.keyword":"artist"===t?"artistId":"collectionId"]:r}}]:[],A=[{term:{type:"artwork"}},...g],O=[{term:{isVisible:!1}}],_=(0,l.sz)(y,e);(null==o?void 0:o.tradingFloor)&&(O=[],A=[{term:{ticketStatus:o.tradingFloor}},...g]),(null==o?void 0:o.tradingFloor)||!R||(O=[],A=[...g]);let p={sort:(0,l.fq)(y),_source:(0,l.D6)(y)},I=[];return v===a.ARTWORKS&&(I=[{index:v},{...p,size:0,query:{bool:{must:_,must_not:O,filter:[...A,...u,...T,...m]}},aggs:{[(0,l.CE)("format")]:{cardinality:{field:"format._id.keyword"}},format:{terms:{field:"format._id.keyword",size:1e3},aggs:{docs:{top_hits:{size:1,_source:["format._id","format.name","format.slug"]}}}}}},{index:v},{...p,size:0,query:{bool:{must:_,must_not:O,filter:[...A,...c,...T,...m]}},aggs:{[(0,l.CE)("genre")]:{cardinality:{field:"genres._id.keyword"}},genre:{terms:{field:"genres._id.keyword",size:1e3},aggs:{docs:{top_hits:{size:1,_source:["genres._id","genres.name","genres.slug"]}}}}}}]),{index:v,searches:[{},{...p,from:i*f,size:f,query:{bool:{must:_,must_not:O,filter:[...A,...c,...u,...T,...m]}}},{index:v},{...p,size:0,query:{bool:{must:_,must_not:O,filter:[...A,...c,...u,...m]}},aggs:{[(0,l.CE)("artist")]:{cardinality:{field:"artistId"}},artist:{terms:{field:"artistId",size:1e3},aggs:{docs:{top_hits:{size:1,_source:["artist","artistId","artistSlug"]}}}}}},{index:v},{...p,size:0,query:{bool:{must:_,must_not:O,filter:[...A,...c,...u,...T,{term:{poa:!1}}]}},aggs:{price:{terms:{field:"listPriceMin",size:1e3}}}},...I]}},async e=>{var r,t,i,o,s,d,a,u,c;let T=await (0,n.z)(e);return[null===(r=(0,l.hS)((0,l.DT)(y,null==T?void 0:T[0])))||void 0===r?void 0:r[0],{artist:(null===(i=(0,l.r8)(null==T?void 0:T[1]).map(l.Dw))||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.facets)||[],price:(null===(s=(0,l._C)(null==T?void 0:T[2]).map(l.hx))||void 0===s?void 0:null===(o=s[0])||void 0===o?void 0:o.facets)||[],format:(null===(a=(0,l.r8)(null==T?void 0:T[3]).map(l.JD))||void 0===a?void 0:null===(d=a[0])||void 0===d?void 0:d.facets)||[],genre:(null===(c=(0,l.r8)(null==T?void 0:T[4]).map(l.T5))||void 0===c?void 0:null===(u=c[0])||void 0===u?void 0:u.facets)||[]}]},{revalidateOnFocus:!1,fallbackData:c,revalidateFirstPage:!1});return{data:null==g?void 0:g.flatMap(e=>null==e?void 0:e[0]).filter(Boolean),facets:null==g?void 0:null===(T=g[0])||void 0===T?void 0:T[1],error:A,mutate:O,size:_,setSize:p,isValidating:I,tradingView:R}}var T=t(80299);let f=o.indexes.EsIndexTypes,m=o.indexes.RecordTypes;function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return(0,T.B)(m.PROFILE_IMAGE,{index:f.ARTWORKS,searches:[{},{from:0,size:r,sort:(0,l.fq)(m.ARTWORK),_source:(0,l.D6)(m.ARTWORK),query:{bool:{must_not:[{term:{isVisible:!1}}],filter:[{term:{type:m.ARTWORK}},...e]}}}]})}let v=o.indexes.EsIndexTypes,y=o.indexes.RecordTypes;function g(){return(0,T.B)(y.LATEST_ARTWORK,{index:v.ARTWORKS,searches:[{},{from:0,size:9,_source:(0,l.D6)(y.ARTWORK),sort:(0,l.fq)(y.LATEST_ARTWORK),query:{bool:{must_not:[{term:{isVisible:!1}}],filter:[{term:{type:"artwork"}}]}}}]})}var A=t(47150);function O(){return(0,A.A)('\n  *[_type == "jobListing"] | order(publishDate desc){\n    title,\n    department,\n    location,\n    contractType,\n    "currentSlug": slug.current\n  }\n  ')||[]}let _=o.indexes.EsIndexTypes,p=o.indexes.RecordTypes;function I(e,r,t,i,o,s){let n=[{term:{type:p.ARTWORK}},{term:{artistId:e}}],d=[{term:{isVisible:!1}}];t&&d.push({term:{objectID:t}}),i&&d.push({term:{collectionId:i}});let a={from:0,size:12,sort:(0,l.fq)(p.ARTWORK),_source:(0,l.D6)(p.ARTWORK)},u={index:_.ARTWORKS,searches:[{},{...a,query:{bool:{filter:n,must_not:d}}}]};return o&&r&&e&&u.searches.push({index:_.ARTWORKS},{...a,query:{bool:{filter:[...n,...o?[{range:{year:{gte:o-5,lte:o+5}}},{term:{"format._id.keyword":r}}]:[]],must_not:d}}}),r&&e&&u.searches.push({index:_.ARTWORKS},{...a,query:{bool:{filter:[...n,{term:{"format._id.keyword":r}}],must_not:d}}}),(0,T.Q)([{recordType:p.ARTWORK,name:"relatedArtwork"},{recordType:p.ARTWORK,name:"relatedPriority"},{recordType:p.ARTWORK,name:"relatedFormat"}],u)}let h=o.indexes.RecordTypes,b=o.indexes.EsIndexTypes;function z(e,r,t){let{data:i,error:o,size:d,setSize:a,isValidating:u}=(0,s.Ay)((i,o)=>{if(o&&!o.length)return null;let s=i*e;return(()=>{switch(r){case h.ARTIST:return{index:b.ARTIST,searches:[{},{from:s,size:e,sort:(0,l.fq)(h.ARTIST),_source:(0,l.D6)(r),query:{bool:{must:[...(0,l.sz)(h.ARTIST,t)]}}}]};case h.COLLECTION:return{index:b.COLLECTION,searches:[{},{from:s,size:e,sort:(0,l.fq)(h.COLLECTION),_source:(0,l.D6)(r),query:{bool:{must:[...(0,l.sz)(h.COLLECTION,t)]}}}]};case h.ARTICLES:return{index:b.ARTICLES,searches:[{},{from:s,size:e,sort:(0,l.fq)(h.ARTICLES),_source:(0,l.D6)(r),query:{bool:{filter:[{term:{type:"article"}}],must:(0,l.sz)(h.ARTICLES,t)}}}]};case h.ARTWORK:default:return{index:b.ARTWORKS,searches:[{},{from:s,size:e,sort:(0,l.fq)(h.ARTWORK),_source:(0,l.D6)(h.ARTWORK),query:{bool:{must_not:[{term:{isVisible:!1}}],filter:[{term:{type:"artwork"}}],must:(0,l.sz)(h.ARTWORK,t)}}}]}}})()},n.z,{revalidateOnFocus:!1,revalidateFirstPage:!1});return{data:null==i?void 0:i.flatMap(e=>{let t=(0,l.r8)(null==e?void 0:e[0]);return t.length||(t=(0,l.DT)(r,null==e?void 0:e[0])),(0,l.hS)(t)}),error:o,size:d,setSize:a,isValidating:u}}function S(e){let{data:r,error:t,isValidating:i}=(0,s.Ay)((r,t)=>{if(""===e||e&&1===e.length)return;if(t&&!t.length)return null;let i=20*r;return{index:b.ARTIST,searches:[{},{from:i,size:20,sort:e?(0,l.fq)(h.ARTIST):{totalArtworks:{order:"desc"}},_source:(0,l.D6)(h.ARTIST),query:{bool:{must:(0,l.sz)(h.ARTIST,e)}}},{index:b.COLLECTION},{from:i,size:20,sort:(0,l.fq)(h.COLLECTION),_source:(0,l.D6)(h.COLLECTION),query:{bool:{must:(0,l.sz)(h.COLLECTION,e)}}},{index:b.ARTWORKS},{from:i,size:20,sort:(0,l.fq)(h.ARTWORK),_source:(0,l.D6)(h.ARTWORK),query:{bool:{must_not:[{term:{isVisible:!1}}],must:(0,l.sz)(h.ARTWORK,e)}}},{index:b.ARTICLES},{from:i,size:20,sort:(0,l.fq)(h.ARTICLES),_source:(0,l.D6)(h.ARTICLES),query:{bool:{must:(0,l.sz)(h.ARTICLES,e)}}}]}},n.z,{revalidateOnFocus:!1,revalidateFirstPage:!1});return{data:null==r?void 0:r.flatMap(e=>(0,l.hS)([...(0,l.DT)(h.ARTIST,null==e?void 0:e[0]),...(0,l.DT)(h.COLLECTION,null==e?void 0:e[1]),...(0,l.DT)(h.ARTWORK,null==e?void 0:e[2]),...(0,l.DT)(h.ARTICLES,null==e?void 0:e[3])])),error:t,isValidating:i}}function C(e,r,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:9,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,T.B)(t,{index:r,searches:[{},{size:i,sort:(0,l.fq)(t),query:{bool:{must_not:[{term:{isVisible:!1}}],filter:o,must:(0,l.sz)(t,e)}}}]})}},80299:(e,r,t)=>{t.d(r,{B:()=>n,Q:()=>d});var i=t(14041),o=t(85216),s=t(17499),l=t(9637);function n(e,r,t){var n,d,a,u,c,T;let f=(0,i.useCallback)(()=>r,[r]),{data:m,error:R}=(0,o.Ay)(f,async r=>{let t=await (0,l.z)(r),i=(0,s.DT)(e,null==t?void 0:t[0]);return i.length||(i=(0,s.r8)(null==t?void 0:t[0])),(0,s.hS)(i,"hits")},{shouldRetryOnError:!0,errorRetryInterval:1e3,errorRetryCount:2,revalidateOnMount:!0,revalidateOnFocus:!1,fallbackData:t&&t});return{type:null!==(u=null==m?void 0:null===(n=m[0])||void 0===n?void 0:n.type)&&void 0!==u?u:"",total:null!==(c=null==m?void 0:null===(d=m[0])||void 0===d?void 0:d.total)&&void 0!==c?c:0,data:null!==(T=null==m?void 0:null===(a=m[0])||void 0===a?void 0:a.hits)&&void 0!==T?T:null,error:R,isLoading:!R&&!m}}function d(e,r,t){let n=(0,i.useCallback)(()=>r,[r]),{data:d,error:a}=(0,o.Ay)(n,async r=>{let t=await (0,l.z)(r);return e.map((e,r)=>{let i=(0,s.DT)(e.name,null==t?void 0:t[r]);return i.length||(i=(0,s.r8)(null==t?void 0:t[r])),(0,s.hS)(i,"data",e.recordType)})},{shouldRetryOnError:!0,errorRetryInterval:1e3,errorRetryCount:2,revalidateOnMount:!0,revalidateOnFocus:!1,fallbackData:t&&t});return{data:null==d?void 0:d.map(e=>(null==e?void 0:e[0])||{}),error:a,isLoading:!a&&!d}}}}]);