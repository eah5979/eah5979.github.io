!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="392260a3-42d6-427e-b578-2cc5e99fd11d",e._sentryDebugIdIdentifier="sentry-dbid-392260a3-42d6-427e-b578-2cc5e99fd11d")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4047],{68069:(e,t,l)=>{"use strict";l.d(t,{A:()=>f});var n=l(31085),a=l(14041),i=l(53373),s=l.n(i);let r=()=>{let e=(0,a.useCallback)(()=>window.visualViewport?window.visualViewport.height:window.innerHeight,[]),[t,l]=(0,a.useState)(e());return(0,a.useEffect)(()=>{var t;let n=t=>{l(e())};return window.addEventListener("resize",n),window.addEventListener("orientationchange",n),null===(t=window.visualViewport)||void 0===t||t.addEventListener("resize",n),()=>{var e;window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n),null===(e=window.visualViewport)||void 0===e||e.removeEventListener("resize",n)}},[e]),t};var d=l(68173),o=l(62749),u=l(630),c=l(98370),v=l(14580),h=l(62458),m=l(42009),_=l.n(m);function f(e){let{name:t,options:l,type:i=v.p.Artist,testID:m,onChange:f,value:p="",placeholder:b="Type or select an option",inputChange:g,label:S,childEl:x,preMenuTitle:A,hideResultsWithNoQuery:w,onFocus:I}=e,[T,E]=(0,a.useState)(!1),y=r(),C=(0,d.U)("(max-width: ".concat(o.A.bpMedium,")")),[j,N]=(0,a.useState)("auto");function B(e,t){return e.find(e=>e.value===t)}let[k,z]=(0,a.useState)();(0,a.useEffect)(()=>{var e,t;(null===(e=B(l,p))||void 0===e?void 0:e.label)&&z(null===(t=B(l,p))||void 0===t?void 0:t.label)},[p,l]);let L=e=>{null==g||g(e)},R=(0,a.useRef)(null),D=(0,a.useRef)(null),M=()=>{g(null),f(t,void 0),z("")};return(0,a.useEffect)(()=>{if(T){var e;null===(e=D.current)||void 0===e||e.focus()}},[T]),(0,a.useEffect)(()=>{C&&T?N(y-170):N("auto")},[T,y,C]),(0,n.jsx)("div",{"data-testid":m,children:(0,n.jsxs)("div",{className:s()(_().base,T&&[_().isFocussed,"focussed"]),children:[(0,n.jsx)("button",{"aria-label":"toggle menu",className:s()(_().toggle),onClick:()=>{E(!1),null==I||I(!1)},children:(0,n.jsx)(c.I,{type:"Chevron",width:12})}),S&&(0,n.jsx)("label",{className:_().label,ref:R,children:(0,n.jsx)(h.default,{size:h.TextSizes.bodySml,children:S})}),(0,n.jsxs)("div",{className:_().comboBox,children:[(0,n.jsxs)("div",{className:_().searchInput,children:[(0,n.jsx)(c.I,{type:"Magnify",width:18}),(0,n.jsx)("input",{value:k,name:t,onChange:e=>{z(e.currentTarget.value),L(e.currentTarget.value)},onFocus:()=>{null==g||g(k),E(!0),null==I||I(!0)},className:_().input,"data-testid":m&&"select-".concat(m),ref:D,placeholder:b})]}),(0,n.jsx)("div",{className:_().clearButton,children:k&&(0,n.jsx)(u.A,{onClick:()=>M(),ariaLabel:"clear selection",variant:"small",testID:m&&"close-".concat(m)})})]}),(0,n.jsx)("div",{className:_().menuWrapper,children:l&&l.length>0&&!(w&&!k)&&(0,n.jsxs)("ul",{className:s()(_().menu,T&&_().menuOpen),style:{maxHeight:j},"data-testid":m&&"options-".concat(m),children:[A&&T&&!k&&(0,n.jsx)("li",{className:_().pretitle,children:(0,n.jsx)(h.default,{size:h.TextSizes.secondaryTitleMedReg,italic:!0,children:A})}),T?l.map(e=>(0,n.jsx)("li",{className:s()(_().menuItem),"data-testid":m&&"option-".concat(m),onClick:()=>{z(e.label),null==f||f(t,e.value),E(!1)},children:(0,n.jsx)(v.A,{name:e.label,image:e.image,_id:e.value,inline:!0,smallImage:!0,type:i,fallBackToInitials:!0})},"".concat(e.value,"-").concat(e.label))):null]})}),(0,n.jsx)("div",{className:_().childEl,onClick:e=>e.stopPropagation(),children:x})]})})}},86428:(e,t,l)=>{"use strict";l.d(t,{A:()=>A});var n=l(31085),a=l(14041),i=l(28541),s=l(68069),r=l(13244),d=l(90021),o=l(33848),u=l(73449),c=l(84296),v=l(82480),h=l(62458),m=l(68717),_=l.n(m);function f(e){let{handleCustomArtist:t,name:l,testID:a}=e;return(0,n.jsxs)("div",{className:_().base,"data-testid":a,children:[(0,n.jsx)(h.default,{size:h.TextSizes.bodySml,className:_().base,Tag:"p",children:"Can't find your artist? Add manually"}),(0,n.jsxs)("button",{className:_().addBtn,onClick:t,children:[(0,n.jsx)("span",{className:_().addBtnIcon}),(0,n.jsx)(h.default,{size:h.TextSizes.primaryTitleSml,children:l})]})]})}var p=l(9637);let b=i.indexes.EsIndexTypes,g=async e=>{var t,l,n,a;let i=await (0,p.z)({index:b.ARTWORKS,searches:[{},{size:0,query:{bool:{filter:{term:{artistId:e}}}}}]});return null!==(a=null==i?void 0:null===(n=i[0])||void 0===n?void 0:null===(l=n.hits)||void 0===l?void 0:null===(t=l.total)||void 0===t?void 0:t.value)&&void 0!==a?a:0},S=i.indexes.EsIndexTypes,x=i.indexes.RecordTypes;function A(e){let{includeEmailPrompt:t}=e,{currentArtworkDispatch:l,currentArtworkState:i}=(0,a.useContext)(r.x),{allArtists:h}=(0,o.M)(),[m,_]=(0,a.useState)(""),[p]=(0,v.d)(m),{data:b}=(0,c.Td)(p,S.ARTIST,x.ARTIST_SELECT_LIST,1e4),{sendSearchInsightsEvent:A}=(0,u.Ay)(),w=(0,a.useMemo)(()=>(b||[]).reduce((e,t)=>e.concat(t),[]).sort((e,t)=>{let l=e.label,n=t.label;return null==l?void 0:l.localeCompare(n)}).sort((e,t)=>{let l=null==h?void 0:h.some(t=>t._id===e.value),n=null==h?void 0:h.some(e=>e._id===t.value);return l&&!n?-1:!l&&n?1:0}).filter(e=>void 0!==e.value),[b]);(0,a.useEffect)(()=>{if(e.defaultValue){var t,l;y(null===(t=e.defaultValue)||void 0===t?void 0:t.label,null===(l=e.defaultValue)||void 0===l?void 0:l.value)}},[e.defaultValue]);let I=e=>l({type:d._M.UPDATE_LIST,payload:e}),T=e=>l({type:d._M.UPDATE_SELECTED_ARTWORK,payload:e}),E=(0,a.useMemo)(()=>{var t,l;return{method:(null===(t=e.searchInsightsEvent)||void 0===t?void 0:t.method)||u.nv.convertedObjectIDs,name:(null===(l=e.searchInsightsEvent)||void 0===l?void 0:l.name)||u.Fm.valuationArtistSelected}},[e.searchInsightsEvent]),y=async(t,l)=>{if(l&&e.onChange){let n=l;!(""!==n)&&i.artist.id.length>0&&(n=i.artist.id),e.onChange&&e.onChange(e.name,n),I({artist:{name:t||"",id:n}});let a=await g(n);e.onChange&&e.onChange("artistWithNoArtworks",0===a),n!==i.artist.id&&A(E.method,{eventName:E.name,indexType:S.ARTIST,filters:["artistId:".concat(l)]})}else{var n;null==e||null===(n=e.onChange)||void 0===n||n.call(e,e.name,void 0),T(d.ue);return}},C={...e,value:e.value||(null==i?void 0:i.artist.id)};return(0,a.useEffect)(()=>{e.onChange("artist_name",void 0)},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.A,{...C,options:w,onChange:(e,t)=>{y(e,t)},inputChange:e=>{_(e)},placeholder:C.placeholder,childEl:t&&0===w.length&&""!=m?(0,n.jsx)(f,{name:m,handleCustomArtist:()=>{var t,l,n;e.onChange&&e.nextOnClick&&(null==e||null===(t=e.onChange)||void 0===t||t.call(e,e.name,void 0),null==e||null===(l=e.onChange)||void 0===l||l.call(e,"artist_name",m),null==e||null===(n=e.nextOnClick)||void 0===n||n.call(e))}}):void 0,preMenuTitle:"Popular searches"})})}},82480:(e,t,l)=>{"use strict";l.d(t,{d:()=>a});var n=l(14041);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{delay:l=600,skipInitialRender:a=!0}=t,[i,s]=(0,n.useState)(e),[r,d]=(0,n.useState)(!1),[o,u]=(0,n.useState)(a);return(0,n.useEffect)(()=>{a&&u(!1)},[]),(0,n.useEffect)(()=>{if(o)return;d(!0);let t=setTimeout(()=>{s(e),d(!1)},l);return()=>{clearTimeout(t)}},[e]),[i,r]}},68717:e=>{e.exports={base:"NoArtistButton_base__leNr1",addBtn:"NoArtistButton_addBtn__WNCNz",addBtnIcon:"NoArtistButton_addBtnIcon__GH8Dp"}},42009:e=>{e.exports={base:"SearchAbleSelect_base__3tClE",isFocussed:"SearchAbleSelect_isFocussed__qucYZ",label:"SearchAbleSelect_label__AvxRI",clearButton:"SearchAbleSelect_clearButton__WD_Lz",menu:"SearchAbleSelect_menu__VVdYB",menuOpen:"SearchAbleSelect_menuOpen__8kheO",menuWrapper:"SearchAbleSelect_menuWrapper__wqh5c",comboBox:"SearchAbleSelect_comboBox__EFOql",input:"SearchAbleSelect_input__QQ1B3 Text_formInput__e8Nmj",toggle:"SearchAbleSelect_toggle___ylS4",menuItem:"SearchAbleSelect_menuItem__Wft_8",menuItemHighlighted:"SearchAbleSelect_menuItemHighlighted__GmuMY",pretitle:"SearchAbleSelect_pretitle__PXzsc",searchInput:"SearchAbleSelect_searchInput__TiQkd"}}}]);